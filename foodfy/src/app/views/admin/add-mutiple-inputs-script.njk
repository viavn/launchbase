<script>
    function addIngredient() {
        const ingredients = document.querySelector("#ingredients");
        const fieldContainer = document.querySelectorAll(".ingredient");

        appendInput(ingredients, fieldContainer);
    }

    function addStep() {
        const preparations = document.querySelector("#preparations");
        const fieldContainer = document.querySelectorAll(".preparation");

        appendInput(preparations, fieldContainer);
    }

    function appendInput(elementToAppend, elementToCopy) {
        // Realiza um clone do último ingrediente adicionado
        const newField = elementToCopy[elementToCopy.length - 1].cloneNode(true);

        // Não adiciona um novo input se o último tem um valor vazio
        if (newField.children[0].value == "") 
            return false;
        
        // Deixa o valor do input vazio
        newField
            .children[0]
            .value = "";
        elementToAppend.appendChild(newField);
    }

    document
        .querySelector(".add-ingredient")
        .addEventListener("click", addIngredient);

    document
        .querySelector(".add-preparation")
        .addEventListener("click", addStep);
</script>